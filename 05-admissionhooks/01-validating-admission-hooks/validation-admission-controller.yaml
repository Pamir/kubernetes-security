apiVersion: admissionregistration.k8s.io/v1beta1
kind: ValidatingWebhookConfiguration
metadata:
  name: label-validation-webhook
  namespace: custom-controllers
webhooks:
  - name: labels.pamir.com
    failurePolicy: Fail
    clientConfig:
      service:
        name: label-admission-controller
        namespace: custom-controllers
        path: /
      caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUV1RENDQXFDZ0F3SUJBZ0lVU2J4KzNGbW1xRTVBTG9FYzl4cERWNkdwOE1Bd0RRWUpLb1pJaHZjTkFRRU4KQlFBd0RURUxNQWtHQTFVRUF4TUNZMkV3SGhjTk1qQXdPREkwTVRFeE9EQXdXaGNOTWpFd09ESTBNVEV4T0RBdwpXakE4TVRvd09BWURWUVFERXpGc1lXSmxiQzFoWkcxcGMzTnBiMjR0WTI5dWRISnZiR3hsY2k1amRYTjBiMjB0ClkyOXVkSEp2Ykd4bGNuTXVjM1pqTUlJQklqQU5CZ2txaGtpRzl3MEJBUUVGQUFPQ0FROEFNSUlCQ2dLQ0FRRUEKN1Q1ZDB3VDkySUE3VHB6NFJIekJET2JCbnFxUmZrakZ0U0thaHdVU2wyVnpRR0pWd3BHdFQvV0ltTFpZRk9vZQo2Qjh0ZS9RaHRDdzdmeklnaGtZKzRrWlRnRFVNcisrd09MdTZUSHJYanYvVjNaYVJsTzJBZlBIL2N5eE9RTnZoCjdLd2xrL1BYM2MyZWp2QlR0TVltV1lzeDdkYjZpTVUwdG14TjI0Wkk4cE01SXlSRUpoM25kWTY4RFVlVW1TUi8KSU0valBwNldDWE5xN004TmN1ZE1JN0VQRVhBOEkxc0hoZjlWNWQwSmpIVlllRkNZY1lRQUtrcFBtNGdkOE1WSgpqZTZncGdBdDZhdDhsQTYzNlVOZlo2TmFpR0NoM2IyTjlpM1dxdTJPK1pBWXBCVUs5cm1RS05GeVFvaTJFOS91ClZYOVViY1VBZ09GUVEwdmhNT2hZNHdJREFRQUJvNEhnTUlIZE1BNEdBMVVkRHdFQi93UUVBd0lGb0RBVEJnTlYKSFNVRUREQUtCZ2dyQmdFRkJRY0RBVEFNQmdOVkhSTUJBZjhFQWpBQU1CMEdBMVVkRGdRV0JCVGwraDV2eHRmYgprcVhwR0ZiQ2lZa1NYa1VDRERDQmlBWURWUjBSQklHQU1INkNHbXhoWW1Wc0xXRmtiV2x6YzJsdmJpMWpiMjUwCmNtOXNiR1Z5Z2kxc1lXSmxiQzFoWkcxcGMzTnBiMjR0WTI5dWRISnZiR3hsY2k1amRYTjBiMjB0WTI5dWRISnYKYkd4bGNuT0NNV3hoWW1Wc0xXRmtiV2x6YzJsdmJpMWpiMjUwY205c2JHVnlMbU4xYzNSdmJTMWpiMjUwY205cwpiR1Z5Y3k1emRtTXdEUVlKS29aSWh2Y05BUUVOQlFBRGdnSUJBTEhhcGlDZk9lKzBkMWFRc09zc1liakVUMkE0ClFpYXoweUpONURGbytaZlI5alNrZkYvck9qMG4veVdla3dFL0dqcTduQWhOOFJQN0pwUzlQWXFHSDkwUVBEVjYKYklUWk9EZVk1RFZXN1FPcDg3bjFQVUFWTEladkdPTEYwbUtrQW9ZenRlOUtaS2NaYkFzUXlFMlBPTVpnWitrUApsUkY4dXRVM0IxYXNoZXJsNlVyYmwxaVRZWmo2RkIvSk1vb1o5dkdSUVducGhzYlZqLzUzTjRKNEx3ckprOEtEClZhdlR4MUdhcFdYaUFNWXhXQXB1L0t1WVB5Y2hOemZWRi9sR1Y0NkdGWnowekV1Vm55b2o4cHNKQWhZSjhuVXYKY3A1QUtPUFNQUjNVdWdKWHZwaWtORk0rTDVHV3NWZ2YxRldyT2pMTk92R25YY3lOWW5YUnNSSDNuR2J3QVcwdwpocGpZRFdpZWY4Sy9RNlhGN2Z0ZXJQZmNYTThXaDUxNUVsY2tEcy9FSGVudk1GQWpNWlgyVGFDclNBUlVFSDJRCk9nZnVYZE03VCtaR1RrWWhmcUIvdUpjSjJhWjk0eW5PYnVkbStReWZ4NzJSd1ZaQ1FmSlIveURjbzZGNnVsUmkKRHQ2ZlhCcU5NK1NKTDc5QjhsYVF2ai9RcnFPcmk5ZHQrODlQYnRtOTQwUXNwUUZ3QnAwOUZ6NjNRdDFaUndjUgpyVTFyVXBOejJkeEVxdW05cU1IaFhtNy84eUZIRmJSOTgwbUc4d1BzWWd1cnJqMVh6Y1RnT0ZDYTJmQmRwS3p4CmxoanBwZ1MxVmNpQk9WSGlwZ0VaYWYvNGVZUWx1Y29QUW5hcDJjQ0NEUTR5L2VERHlPcUVRNHozL2o5MXgxQUcKcERZTWN5ZXFsVHdEMDZodgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==" # a base64 encoded self signed ca cert is needed because all Admission Webhooks need to be on SSL
    rules:
      - apiGroups: 
        - ""
        resources:
          - "pods"
        apiVersions:
          - "*"
        operations:
          - CREATE